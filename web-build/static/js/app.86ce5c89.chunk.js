(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{198:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return M}));var a=n(81),c=n(2),o=n(298),i=n(297),r=n(14),l=n.n(r),s=n(113),u=n(79),d=n(22),f=n(4),j=n(0),h=n(31),b=n(73),p=(n(278),n(267),(0===b.default.apps.length?b.default.initializeApp({apiKey:"AIzaSyBQVM_g349rjQe84QzOvuE8RAeO2-oZOYY",authDomain:"reactnative-signal.firebaseapp.com",projectId:"reactnative-signal",storageBucket:"reactnative-signal.appspot.com",messagingSenderId:"567253339221",appId:"1:567253339221:web:2ef3cddeda88e33af118dc"}):b.default.app()).firestore()),g=b.default.auth(),m=n(1),O=function(e){var t=e.navigation;Object(j.useEffect)((function(){return g.onAuthStateChanged((function(e){e&&t.replace("Home")}))}),[]);var n=Object(j.useState)(""),a=l()(n,2),c=a[0],o=a[1],i=Object(j.useState)(""),r=l()(i,2),b=r[0],p=r[1];return Object(m.jsxs)(u.default,{style:x.container,children:[Object(m.jsx)(h.Image,{source:{uri:"https://upload.wikimedia.org/wikipedia/commons/5/56/Logo_Signal..png"},style:{width:100,height:100}}),Object(m.jsxs)(f.default,{style:x.inputContainer,children:[Object(m.jsx)(h.Input,{placeholder:"Email",autoFocus:!0,type:"email",value:c,onChangeText:function(e){return o(e)}}),Object(m.jsx)(h.Input,{placeholder:"Password",secureTextEntry:!0,type:"password",value:b,onChangeText:function(e){return p(e)}})]}),Object(m.jsx)(h.Button,{containerStyle:x.button,title:"Login",onPress:function(){g.signInWithEmailAndPassword(c,b).catch((function(e){s.default.alert("errro",e.message)}))}}),Object(m.jsx)(h.Button,{onPress:function(){t.navigate("Register")},containerStyle:x.button,type:"outline",title:"Register"}),Object(m.jsx)(d.default,{style:x.credit,children:"Developer: Sankalp Sachan"}),Object(m.jsx)(f.default,{style:{height:10}})]})},x=c.default.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:10,backgroundColor:"white"},inputContainer:{width:300},button:{marginTop:10,width:200},credit:{height:50,fontSize:18,color:"#868686",marginVertical:30}}),y=function(e){e.navigation;var t=Object(j.useState)(""),n=l()(t,2),a=n[0],c=n[1],o=Object(j.useState)(""),i=l()(o,2),r=i[0],s=i[1],d=Object(j.useState)(""),b=l()(d,2),p=b[0],O=b[1],x=Object(j.useState)(null),y=l()(x,2),S=y[0],C=y[1],w=function(){g.createUserWithEmailAndPassword(r,p).then((function(e){e.user.updateProfile({displayName:a,photoURL:S||"https://cdn0.iconfinder.com/data/icons/superuser-web-kit/512/686909-user_people_man_human_head_person-512.png"})})).catch((function(e){console.log(e)}))};return Object(m.jsxs)(u.default,{style:v.container,children:[Object(m.jsx)(h.Text,{h3:!0,style:{marginBottom:50},children:"Create a signal account"}),Object(m.jsxs)(f.default,{style:v.inputContainer,children:[Object(m.jsx)(h.Input,{placeholder:"Full Name",autoFocus:!0,type:"text",value:a,onChangeText:function(e){return c(e)}}),Object(m.jsx)(h.Input,{placeholder:"Email",type:"email",value:r,onChangeText:function(e){return s(e)}}),Object(m.jsx)(h.Input,{placeholder:"Password",secureTextEntry:!0,type:"password",value:p,onChangeText:function(e){return O(e)}}),Object(m.jsx)(h.Input,{placeholder:"Profile Picture url (optional)",type:"text",value:S,onChangeText:function(e){return C(e)},onSubmitEditing:w})]}),Object(m.jsx)(h.Button,{onPress:w,containerStyle:v.button,raised:!0,title:"Register"}),Object(m.jsx)(h.Text,{style:v.credit,children:"Developer: Sankalp Sachan"})]})},v=c.default.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:10,backgroundColor:"white"},inputContainer:{width:300},button:{width:200},credit:{height:50,fontSize:18,color:"#868686",marginVertical:30}}),S=n(78),C=n(53),w=n(24),k=function(e){var t,n,a=e.chatName,c=e.id,o=e.enterChat,i=e.chatPhoto,r=Object(j.useState)([]),s=l()(r,2),u=s[0],d=s[1];return Object(j.useEffect)((function(){return p.collection("chats").doc(c).collection("messages").orderBy("timeStamp","desc").onSnapshot((function(e){d(e.docs.map((function(e){return e.data()})))}))}),[]),Object(m.jsx)(w.default,{onPress:function(){o(a,c,i)},activeOpacity:.6,children:Object(m.jsxs)(h.ListItem,{children:[Object(m.jsx)(h.Avatar,{rounded:!0,source:{uri:i}}),Object(m.jsxs)(h.ListItem.Content,{children:[Object(m.jsx)(h.ListItem.Title,{style:{fontWeight:"800"},children:a}),Object(m.jsxs)(h.ListItem.Subtitle,{numberOfLines:1,ellipsizeMode:"tail",children:[null==u||null==(t=u[0])?void 0:t.displayName,": ",null==u||null==(n=u[0])?void 0:n.message]})]})]})})},z=(c.default.create({}),n(83)),I=n(114),P=function(e){var t=e.navigation,n=Object(j.useState)([]),c=l()(n,2),o=c[0],i=c[1],r=function(){g.signOut().then((function(){t.replace("Login")}))},s=function(){t.navigate("Addchat")},u=function(e,n,a){t.navigate("Chat",{id:n,chatName:e,chatPhoto:a})};return Object(j.useEffect)((function(){return p.collection("chats").onSnapshot((function(e){i(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),Object(j.useLayoutEffect)((function(){t.setOptions({title:"Signal",headerStyle:{backgroundColor:"white"},headerTintColor:"black",headerLeft:function(){var e;return Object(m.jsx)(f.default,{style:{marginRight:20},children:Object(m.jsx)(w.default,{onPress:r,children:Object(m.jsx)(h.Avatar,{rounded:!0,source:{uri:null==g||null==(e=g.currentUser)?void 0:e.photoURL}})})})},headerRight:function(){return Object(m.jsxs)(f.default,{style:{flexDirection:"row",width:70,justifyContent:"space-between"},children:[Object(m.jsx)(w.default,{activeOpacity:.5,children:Object(m.jsx)(z.default,{name:"camerao",size:24,color:"black"})}),Object(m.jsx)(w.default,{onPress:s,activeOpacity:.5,children:Object(m.jsx)(I.default,{name:"pencil",size:24,color:"black"})})]})}})}),[]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(a.StatusBar,{style:"dark"}),Object(m.jsx)(S.default,{children:Object(m.jsx)(C.default,{style:L.scrollView,children:o.map((function(e){var t=e.id,n=e.data,a=n.chatName,c=n.chatPhoto;return Object(m.jsx)(k,{enterChat:u,chatPhoto:c,chatName:a,id:t},t)}))})})]})},L=c.default.create({scrollView:{height:"100%"}}),T=n(34),R=n.n(T),E=n(115),B=function(e){var t=e.navigation,n=Object(j.useState)(""),a=l()(n,2),c=a[0],o=a[1],i=Object(j.useState)(""),r=l()(i,2),s=r[0],u=r[1];Object(j.useLayoutEffect)((function(){t.setOptions({title:"Add new chat",headerStyle:{backgroundColor:"white"},headerTintColor:"black",headerLeft:function(){return Object(m.jsx)(w.default,{activeOpacity:.5,onPress:function(){t.goBack()},children:Object(m.jsxs)(f.default,{style:{flexDirection:"row",marginRight:50,alignItems:"center"},children:[Object(m.jsx)(z.default,{name:"arrowleft",size:18,color:"black"}),Object(m.jsx)(d.default,{style:{color:"black",fontSize:18,fontWeight:"400"},children:"Chats"})]})})}})}),[t]);var b=function(){var e=R()((function*(){yield p.collection("chats").add({chatName:c,chatPhoto:s.length>0?s:"https://o365reports.com/wp-content/uploads/2016/08/office365-groups-icon.png"}).then((function(){t.goBack()})).catch((function(e){console.log(e)}))}));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)(f.default,{style:A.container,children:[Object(m.jsx)(h.Input,{placeholder:"Enter chat name",value:c,onChangeText:function(e){return o(e)},leftIcon:Object(m.jsx)(z.default,{name:"wechat",style:{marginHorizontal:10},size:24,color:"#494b4e"})}),Object(m.jsx)(h.Input,{placeholder:"Enter photo url (optional)",value:s,onChangeText:function(e){return u(e)},leftIcon:Object(m.jsx)(E.default,{name:"photo",style:{marginHorizontal:10},size:24,color:"#494b4e"})}),Object(m.jsx)(h.Button,{title:"Create chat",onPress:b})]})},A=c.default.create({container:{flex:1,padding:30,backgroundColor:"white"}}),N=n(85),U=n(103),V=n(64),W=n(96),D=n(93),H=n(116),F=function(e){var t=e.route,n=e.navigation,c=Object(j.useRef)(),o=Object(j.useState)(""),i=l()(o,2),r=i[0],s=i[1],O=Object(j.useState)([]),x=l()(O,2),y=x[0],v=x[1];Object(j.useLayoutEffect)((function(){n.setOptions({title:t.params.chatName,headerStyle:{backgroundColor:"white"},headerTintColor:"black",headerLeft:function(){return Object(m.jsxs)(f.default,{style:{marginRight:20,flexDirection:"row",alignItems:"center"},children:[Object(m.jsx)(w.default,{activeOpacity:.7,onPress:function(){n.goBack()},children:Object(m.jsx)(W.default,{name:"arrow-back-ios",size:24,color:"black"})}),Object(m.jsx)(h.Avatar,{rounded:!0,source:{uri:t.params.chatPhoto}})]})},headerRight:function(){return Object(m.jsxs)(f.default,{style:{flexDirection:"row",width:110,justifyContent:"space-between"},children:[Object(m.jsx)(w.default,{activeOpacity:.5,children:Object(m.jsx)(D.default,{name:"videocam-outline",size:24,color:"black"})}),Object(m.jsx)(w.default,{activeOpacity:.5,children:Object(m.jsx)(D.default,{name:"call-outline",size:24,color:"black"})}),Object(m.jsx)(w.default,{activeOpacity:.5,children:Object(m.jsx)(H.default,{name:"more-vertical",size:24,color:"black"})})]})}})}),[n,t]),Object(j.useLayoutEffect)((function(){return p.collection("chats").doc(t.params.id).collection("messages").orderBy("timeStamp","asc").onSnapshot((function(e){v(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[t]);return Object(m.jsxs)(S.default,{style:_.scrollCon,children:[Object(m.jsx)(a.StatusBar,{style:"dark"}),Object(m.jsx)(u.default,{style:_.container,children:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(V.default,{onPress:N.default.dismiss,children:Object(m.jsx)(C.default,{contentContainerStyle:{paddingTop:15},ref:c,onContentSizeChange:function(){return c.current.scrollToEnd({animated:!0})},children:y.map((function(e){var t=e.id,n=e.data;return n.email===g.currentUser.email?Object(m.jsxs)(f.default,{style:_.sender,children:[Object(m.jsx)(h.Avatar,{position:"absolute",bottom:-10,right:-10,size:24,source:{uri:n.photoURL}}),Object(m.jsx)(d.default,{style:{fontSize:15,fontWeight:"500"},children:n.message})]},t):Object(m.jsxs)(f.default,{style:_.receiver,children:[Object(m.jsx)(h.Avatar,{position:"absolute",bottom:-10,left:-10,size:24,source:{uri:n.photoURL}}),Object(m.jsx)(d.default,{style:{fontSize:15,fontWeight:"500",color:"white"},children:n.message}),Object(m.jsx)(d.default,{style:{position:"absolute",bottom:-12,left:15,fontSize:12},children:n.displayName})]},t)}))})}),Object(m.jsxs)(f.default,{style:_.footer,children:[Object(m.jsx)(U.default,{placeholder:"Type a message",onChangeText:function(e){return s(e)},value:r,style:_.input}),Object(m.jsx)(w.default,{disabled:0===r.length,onPress:function(){N.default.dismiss(),p.collection("chats").doc(t.params.id).collection("messages").add({timeStamp:b.default.firestore.FieldValue.serverTimestamp(),message:r,displayName:g.currentUser.displayName,email:g.currentUser.email,photoURL:g.currentUser.photoURL}),s("")},activeOpacity:.6,children:Object(m.jsx)(D.default,{name:"send",size:30,color:"#2c6bed"})})]})]})})]})},_=c.default.create({scrollCon:{flex:1,backgroundColor:"white"},container:{flex:1},sender:{paddingHorizontal:15,paddingVertical:10,backgroundColor:"#dddddd",alignSelf:"flex-end",borderRadius:20,marginRight:15,marginBottom:20,maxWidth:"80%",position:"relative"},receiver:{paddingHorizontal:15,paddingVertical:10,backgroundColor:"#2c6bed",alignSelf:"flex-start",borderRadius:20,marginLeft:15,marginBottom:20,maxWidth:"80%",position:"relative"},footer:{flexDirection:"row",width:"100%",alignItems:"center",paddingHorizontal:15,justifyContent:"center",marginVertical:15},input:{bottom:0,height:50,flex:1,fontWeight:"400",fontSize:18,borderRadius:20,backgroundColor:"#eeeeee",paddingHorizontal:15,marginRight:10,paddingVertical:5,borderColor:"transparent",borderWidth:1}}),Q=Object(i.default)(),J={headerStyle:{backgroundColor:"#2c6bed"},headerTintColor:"white"};function M(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(a.StatusBar,{style:"light"}),Object(m.jsx)(o.default,{children:Object(m.jsxs)(Q.Navigator,{screenOptions:J,children:[Object(m.jsx)(Q.Screen,{name:"Login",component:O}),Object(m.jsx)(Q.Screen,{name:"Register",component:y}),Object(m.jsx)(Q.Screen,{name:"Home",component:P}),Object(m.jsx)(Q.Screen,{name:"Addchat",component:B}),Object(m.jsx)(Q.Screen,{name:"Chat",component:F})]})})]})}c.default.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}})},206:function(e,t,n){e.exports=n(276)}},[[206,1,2]]]);
//# sourceMappingURL=app.86ce5c89.chunk.js.map